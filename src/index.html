<!DOCTYPE html>
<html lang="ru">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>два на два</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./styles.css">
    <style>
        body {
            background-image: url('./1.png'); /* путь к картинке */
            background-size: cover; /* масштабирует, чтобы покрыть весь экран */
            background-position: center; /* по центру */
            background-repeat: no-repeat; /* не повторяется */
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        











        
        body {
            background-color: #f5f5f5;
            display: flex;
            min-height: 100vh;
        }
        
        /* Боковая панель */
        .sidebar {
            width: 60px;
            height: 100vh;
            background-color: #ffffff;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: fixed;
            z-index: 10;
            overflow: hidden;
        }
        
        .sidebar:hover {
            width: 200px;
        }
        
        .sidebar-menu {
            padding-top: 20px;
        }
        
        .sidebar-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            cursor: pointer;
            color: #555555;
            text-decoration: none;
            transition: all 0.2s ease;
        }
        
        .sidebar-item:hover {
            background-color: #f0f0f0;
            color: #333333;
        }
        
        .sidebar-icon {
            font-size: 20px;
            min-width: 30px;
        }
        
        .sidebar-text {
            margin-left: 15px;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s ease 0.1s;
        }
        
        .sidebar:hover .sidebar-text {
            opacity: 1;
        }
        
        /* Основное содержимое */
        .main-content {
            flex: 1;
            margin-left: 60px;
            transition: margin-left 0.3s ease;
        }
        
        .sidebar:hover ~ .main-content {
            margin-left: 200px;
        }
        
        /* Шапка сайта */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        /* Логотип */
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #333333;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-left: 15px;
        }
        
        /* Поиск */
        .search-container {
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .search-btn {
            cursor: pointer;
            font-size: 20px;
            color: #555555;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            color: #333333;
        }
        
        .search-input {
            width: 0;
            padding: 0;
            border: none;
            outline: none;
            background: transparent;
            transition: all 0.3s ease;
            font-size: 16px;
            margin-left: 10px;
        }
        
        .search-container.active .search-input {
            width: 200px;
            padding: 5px 10px;
            border-bottom: 1px solid #ddd;
        }
        
        /* Правая часть шапки */
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Кнопка аккаунта */
        .account {
            display: flex;
            align-items: center;
            cursor: pointer;
            position: relative;
        }
        
        .account-icon {
            font-size: 20px;
            color: #555555;
            transition: all 0.3s ease;
        }
        
        .account:hover .account-icon {
            color: #333333;
        }
        
        .account-menu {
            position: absolute;
            top: 50px;
            right: 0;
            width: 200px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 10px 0;
            z-index: 100;
            display: none;
        }
        
        .account-menu.show {
            display: block;
        }
        
        .account-menu-item {
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .account-menu-item:hover {
            background-color: #f8f9fa;
        }
        
        /* Блок статуса */
        .status {
            display: flex;
            align-items: center;
            background-color: #f0f0f0;
            border-radius: 20px;
            padding: 5px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }
        
        .status:hover {
            background-color: #e0e0e0;
        }
        
        /* Индикатор статуса */
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        /* Стили для разных состояний */
        .status-working .status-indicator {
            background-color: #4CAF50;
            animation: pulse 1.5s infinite;
        }
        
        .status-resting .status-indicator {
            background-color: #FF9800;
            animation: none;
        }
        
        /* Текст статуса */
        .status-text {
            font-size: 14px;
            color: #555555;
        }
        
        /* Анимация пульсации индикатора */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);
            }
            70% {
                box-shadow: 0 0 0 8px rgba(76, 175, 80, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
            }
        }
        
        /* Иконка уведомлений */
        .notifications {
            position: relative;
            cursor: pointer;
            font-size: 20px;
            color: #555555;
            transition: all 0.3s ease;
        }
        
        .notifications:hover {
            color: #333333;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff5252;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }
        
        /* Панель уведомлений */
        .notifications-panel {
            position: absolute;
            top: 60px;
            right: 20px;
            width: 350px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 15px;
            z-index: 100;
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .notifications-panel.show {
            display: block;
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .notification-title {
            font-weight: bold;
            font-size: 16px;
        }
        
        .notification-close {
            cursor: pointer;
            font-size: 18px;
            color: #999;
        }
        
        .notification-item {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notification-item:last-child {
            border-bottom: none;
        }
        
        .notification-time {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }

        /* Модальное окно проектов */
        .projects-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            box-sizing: border-box;
        }

        .projects-modal.show {
            display: flex;
        }

        .projects-header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .projects-title {
            font-size: 32px;
            font-weight: bold;
            color: #333;
        }

        .projects-close {
            font-size: 28px;
            cursor: pointer;
            color: #555;
        }

        .projects-close:hover {
            color: #333;
        }

        .projects-list {
            width: 100%;
            max-width: 800px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        /* Овальные кнопки проектов */
        .project-item {
            background-color: #fff;
            border-radius: 50px; /* Овальная форма */
            padding: 15px 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 60px;
        }

        .project-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background-color: #f8f9fa;
        }

        .project-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .add-project {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f0f0;
            border: 2px dashed #ccc;
            border-radius: 50px; /* Овальная форма */
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 60px;
        }

        .add-project:hover {
            background-color: #e0e0e0;
            border-color: #999;
        }

        .add-project-icon {
            font-size: 24px;
            color: #555;
            margin-right: 10px;
        }

        .add-project-text {
            font-size: 18px;
            color: #555;
        }

        .project-form {
            display: none;
            width: 100%;
            max-width: 800px;
            margin-top: 20px;
        }

        .project-form.show {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 50px; /* Овальная форма */
            font-size: 16px;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .form-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 50px; /* Овальная форма */
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s;
        }

        .form-btn.cancel {
            background-color: #f0f0f0;
            color: #555;
        }

        .form-btn.cancel:hover {
            background-color: #e0e0e0;
        }
        .form-btn.save {
            background-color: #4CAF50;
            color: white;
        }

        .form-btn.save:hover {
            background-color: #45a049;
        }
        /* Модальное окно статистики */
.stats-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.95);
    z-index: 1000;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    box-sizing: border-box;
}

.stats-modal.show {
    display: flex;
}

.stats-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.stats-title {
    font-size: 32px;
    font-weight: bold;
    color: #333;
}

.stats-close {
    font-size: 28px;
    cursor: pointer;
    color: #555;
}

.stats-close:hover {
    color: #333;
}

.stats-tabs {
    display: flex;
    width: 100%;
    max-width: 800px;
    border-bottom: 1px solid #ddd;
    margin-bottom: 20px;
}

.stats-tab {
    padding: 10px 20px;
    cursor: pointer;
    color: #555;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.stats-tab:hover {
    color: #333;
}

.stats-tab.active {
    color: #4CAF50;
    border-bottom-color: #4CAF50;
    font-weight: bold;
}

.stats-content {
    width: 100%;
    max-width: 800px;
    height: 500px;
    overflow-y: auto;
}

.stats-pane {
    display: none;
}

.stats-pane.active {
    display: block;
}

/* Стили для вкладок задач */
.tasks-tabs {
    display: flex;
    margin-bottom: 20px;
}

.tasks-tab {
    padding: 8px 16px;
    cursor: pointer;
    color: #555;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    font-size: 14px;
}

.tasks-tab:hover {
    color: #333;
}

.tasks-tab.active {
    color: #4CAF50;
    border-bottom-color: #4CAF50;
    font-weight: bold;
}

.tasks-content {
    margin-top: 15px;
}

.tasks-pane {
    display: none;
}

.tasks-pane.active {
    display: block;
}

.task-item {
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s;
}

.task-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
}

.task-item.completed {
    opacity: 0.8;
    background-color: #f9f9f9;
}

.task-name {
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
}

.task-info, .task-deadline, .task-completed {
    font-size: 14px;
    color: #666;
    margin-bottom: 3px;
}

.task-deadline {
    color: #e74c3c;
}

.task-completed {
    color: #4CAF50;
}

/* Стили для графиков и статистики */
.stats-chart {
    width: 100%;
    height: 300px;
    margin-bottom: 30px;
    background-color: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.stats-summary, .time-stats {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
}

.summary-item, .time-stat {
    text-align: center;
    padding: 15px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    flex: 1;
    margin: 0 10px;
}

.summary-value, .time-value {
    font-size: 32px;
    font-weight: bold;
    color: #4CAF50;
    margin-bottom: 5px;
}
.summary-label, .time-label {
    font-size: 14px;
    color: #666;
}
.employees-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.95);
    z-index: 1000;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px;
    box-sizing: border-box;
}

.employees-modal.show {
    display: flex;
}

.employees-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.employees-title {
    font-size: 32px;
    font-weight: bold;
    color: #333;
}

.employees-close {
    font-size: 28px;
    cursor: pointer;
    color: #555;
}

.employees-close:hover {
    color: #333;
}

.employees-list {
    width: 100%;
    max-width: 800px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.employee-item {
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.employee-name {
    font-weight: bold;
    color: #333;
}

.employee-role {
    color: #666;
}

.employee-actions {
    display: flex;
    gap: 10px;
}

.employee-action {
    cursor: pointer;
    color: #4CAF50;
    font-size: 16px;
}

.employee-action.delete {
    color: #e74c3c;
}
/* Улучшенные стили для модального окна задач */
.tasks-modal {
    background-color: rgba(255, 255, 255, 0.95);
}

.tasks-list {
    width: 100%;
    max-width: 800px;
    max-height: 60vh;
    overflow-y: auto;
    padding: 10px;
}

.task-item {
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.2s;
}

.task-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.task-item.completed {
    opacity: 0.7;
    background-color: #f5f5f5;
}

.task-item.completed .task-name {
    text-decoration: line-through;
    color: #777;
}

.task-name {
    font-weight: bold;
    color: #333;
    flex-grow: 1;
}

.task-actions {
    display: flex;
    gap: 10px;
}

.task-action {
    cursor: pointer;
    font-size: 16px;
    padding: 5px;
}

.task-action.complete {
    color: #4CAF50;
}

.task-action.delete {
    color: #e74c3c;
}






/* Стили для окна задач проекта */
.tasks-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.95);
    z-index: 1000;
    display: none;
    flex-direction: column;
    align-items: center;
    padding: 40px;
    box-sizing: border-box;
    overflow-y: auto;
}

.tasks-modal.show {
    display: flex;
}

.tasks-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.tasks-title {
    font-size: 32px;
    font-weight: bold;
    color: #333;
}

.tasks-close {
    font-size: 28px;
    cursor: pointer;
    color: #555;
}

.tasks-close:hover {
    color: #333;
}

/* Контейнер для столбцов задач */
.tasks-container {
    display: flex;
    gap: 20px;
    width: 100%;
    max-width: 1200px;
    overflow-x: auto;
    padding-bottom: 20px;
}

/* Стили для столбца задач */
.task-column {
    min-width: 280px;
    background-color: #fff;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 15px;
    transition: all 0.3s ease;
}

.task-column-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    cursor: pointer;
}

.task-column-title {
    font-size: 18px;
    font-weight: bold;
    color: #333;
}

.task-column-toggle {
    font-size: 16px;
    color: #555;
    transition: transform 0.3s;
}

.task-column.collapsed .task-column-toggle {
    transform: rotate(-90deg);
}

.task-column.collapsed .task-list {
    display: none;
}

/* Стили для списка задач */
.task-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.task-item {
    background-color: #f9f9f9;
    border-radius: 8px;
    padding: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.task-item:hover {
    background-color: #f0f0f0;
    transform: translateY(-2px);
}

.task-name {
    font-size: 16px;
    margin-bottom: 5px;
}

.task-description {
    font-size: 14px;
    color: #666;
    margin-bottom: 5px;
}

.task-footer {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #999;
}

/* Кнопка добавления столбца */
.add-column {
    min-width: 280px;
    background-color: #f0f0f0;
    border: 2px dashed #ccc;
    border-radius: 10px;
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.add-column:hover {
    background-color: #e0e0e0;
    border-color: #999;
}

.add-column-icon {
    font-size: 20px;
    color: #555;
    margin-right: 10px;
}

.add-column-text {
    font-size: 16px;
    color: #555;
}

/* Форма добавления столбца */
.column-form {
    display: none;
    min-width: 280px;
    background-color: #fff;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.column-form.show {
    display: block;
}

/* Форма добавления задачи */
.task-form {
    display: none;
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    margin-top: 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.task-form.show {
    display: block;
}

.form-input-sm {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    margin-bottom: 10px;
}

.form-textarea {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    min-height: 80px;
    resize: vertical;
    margin-bottom: 10px;
}

.form-actions-sm {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.form-btn-sm {
    padding: 6px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.2s;
}

/* Стили для подзадач */
.subtasks {
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid #eee;
}

.subtasks-title {
    font-size: 12px;
    color: #999;
    margin-bottom: 5px;
}

.subtasks-list {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.subtask {
    display: flex;
    align-items: center;
    font-size: 13px;
    padding: 3px 5px;
    border-radius: 4px;
    background-color: #f5f5f5;
}

.subtask.completed span {
    text-decoration: line-through;
    color: #999;
}

.subtask label {
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    width: 100%;
}

.subtask input[type="checkbox"] {
    margin: 0;
}

/* Кнопки действий задачи */
.task-actions {
    display: flex;
    gap: 8px;
    margin-top: 10px;
    justify-content: flex-end;
}

.task-actions i {
    font-size: 14px;
    color: #999;
    cursor: pointer;
    transition: color 0.2s;
}

.task-actions i:hover {
    color: #555;
}

/* Форма подзадачи */
.subtask-form {
    padding: 10px;
    background-color: #f9f9f9;
    border-radius: 6px;
    margin-top: 5px;
}

/* Действия столбца */
.task-column-actions {
    display: flex;
    gap: 8px;
    margin-left: auto;
}

.task-column-actions i {
    font-size: 14px;
    color: #999;
    cursor: pointer;
    transition: color 0.2s;
}

.task-column-actions i:hover {
    color: #555;
}












    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  
    <!-- Боковая панель (без иконки настроек) -->
    <div class="sidebar">
        <div class="sidebar-menu">
            <a href="#" class="sidebar-item" id="projectsButton">
                <i class="fas fa-project-diagram sidebar-icon"></i>
                <span class="sidebar-text">Проекты</span>
            </a>
            <a href="#" class="sidebar-item">
                <i class="fas fa-chart-line sidebar-icon"></i>
                <span class="sidebar-text">Статистика</span>
            </a>
            <a href="#" class="sidebar-item" id="employeesButton">
                <i class="fas fa-users sidebar-icon"></i>
                <span class="sidebar-text">Сотрудники</span>
            </a>
        </div>
    </div>
    
    <!-- Основное содержимое -->
    <div class="main-content">
        <header class="header">
            <div class="search-container" id="searchContainer">
                <div class="search-btn" id="searchButton">
                    <i class="fas fa-search"></i>
                </div>
                <input type="text" class="search-input" id="searchInput" placeholder="Поиск...">
            </div>
            <div class="logo">два на два</div>
            
            <div class="header-right">
                <div class="notifications" id="notificationsButton">
                    <i class="fas fa-bell"></i>
                    <div class="notification-badge">3</div>
                </div>
                
                <div class="account" id="accountButton">
                    <i class="fas fa-user account-icon"></i>
                    <div class="account-menu" id="accountMenu">
                        <div class="account-menu-item">Профиль</div>
                        <div class="account-menu-item">Настройки</div>
                        <div class="account-menu-item"><a href="register.html" style="text-decoration: none; color: inherit;">Регистрация</a></div>
                        <div class="account-menu-item">Выйти</div>
                    </div>
                </div>
                
                <div class="status status-working" id="statusButton">
                    <div class="status-indicator"></div>
                    <span class="status-text">Работаю</span>
                </div>
            </div>
            
            <div class="notifications-panel" id="notificationsPanel">
                <div class="notification-header">
                    <div class="notification-title">Уведомления</div>
                    <div class="notification-close" id="closeNotifications">&times;</div>
                </div>
                <div class="notification-item">
                    <div>Новое сообщение от пользователя</div>
                    <div class="notification-time">5 минут назад</div>
                </div>
                <div class="notification-item">
                    <div>Задача выполнена успешно</div>
                    <div class="notification-time">2 часа назад</div>
                </div>
                <div class="notification-item">
                    <div>Система обновлена до версии 2.0</div>
                    <div class="notification-time">Вчера, 14:30</div>
                </div>
            </div>
        </header>
        
        <!-- Основное содержимое страницы -->
        <main>
            <!-- Контент страницы -->
        </main>
    </div>


    <!-- Модальное окно проектов -->
    <div class="projects-modal" id="projectsModal">
        <div class="projects-header">
            <div class="projects-title">ПРОЕКТЫ</div>
            <div class="projects-close" id="closeProjects">&times;</div>
        </div>
        
        <div class="projects-list" id="projectsList">
            <!-- Проекты будут добавляться сюда динамически -->
            <div class="project-item">
                <div class="project-name">Проект 1</div>
            </div>
            <div class="project-item">
                <div class="project-name">Проект 2</div>
            </div>
            <div class="project-item">
                <div class="project-name">Проект 3</div>
            </div>
            
            <div class="add-project" id="addProjectButton">
                <i class="fas fa-plus add-project-icon"></i>
                <span class="add-project-text">Добавить проект</span>
            </div>
        </div>
        
        <div class="project-form" id="projectForm">
            <div class="form-group">
                <input type="text" class="form-input" id="projectNameInput" placeholder="Название проекта">
            </div>
            <div class="form-actions">
                <button class="form-btn cancel" id="cancelProject">Отмена</button>
                <button class="form-btn save" id="saveProject">Сохранить</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно статистики -->
<div class="stats-modal" id="statsModal">
    <div class="stats-header">
        <div class="stats-title">СТАТИСТИКА</div>
        <div class="stats-close" id="closeStats">&times;</div>
    </div>
    
    <div class="stats-tabs">
        <div class="stats-tab active" data-tab="tasks">Задачи</div>
        <div class="stats-tab" data-tab="projects">Проекты</div>
        <div class="stats-tab" data-tab="time">Время</div>
    </div>

    
    <div class="stats-content">
        <div class="stats-pane active" id="tasksPane">
            <div class="tasks-tabs">
                <div class="tasks-tab active" data-tab="active">Активные</div>
                <div class="tasks-tab" data-tab="completed">Завершенные</div>
            </div>
            
            <div class="tasks-content">
                <div class="tasks-pane active" id="activeTasksPane">
                    <div class="task-item">
                        <div class="task-name">Разработать главную страницу</div>
                        <div class="task-info">Проект: Сайт компании</div>
                        <div class="task-deadline">Срок: 15.05.2023</div>
                    </div>
                    <div class="task-item">
                        <div class="task-name">Написать API для сервиса</div>
                        <div class="task-info">Проект: Мобильное приложение</div>
                        <div class="task-deadline">Срок: 20.05.2023</div>
                    </div>
                </div>
                
                <div class="tasks-pane" id="completedTasksPane">
                    <div class="task-item completed">
                        <div class="task-name">Дизайн логотипа</div>
                        <div class="task-info">Проект: Брендинг</div>
                        <div class="task-completed">Завершено: 10.04.2023</div>
                    </div>
                    <div class="task-item completed">
                        <div class="task-name">Тестирование модуля</div>
                        <div class="task-info">Проект: Внутренняя система</div>
                        <div class="task-completed">Завершено: 05.04.2023</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="stats-pane" id="projectsPane">
            <div class="stats-chart">
                <canvas id="projectsChart"></canvas>
            </div>
            <div class="stats-summary">
                <div class="summary-item">
                    <div class="summary-value">5</div>
                    <div class="summary-label">Всего проектов</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">3</div>
                    <div class="summary-label">Активных</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value">2</div>
                    <div class="summary-label">Завершено</div>
                </div>
            </div>
        </div>
        
        <div class="stats-pane" id="timePane">
            <div class="stats-chart">
                <canvas id="timeChart"></canvas>
            </div>
            <div class="time-stats">
                <div class="time-stat">
                    <div class="time-value">32</div>
                    <div class="time-label">Часов на этой неделе</div>
                </div>
                <div class="time-stat">
                    <div class="time-value">7.2</div>
                    <div class="time-label">Среднее в день</div>
                </div>
            </div>
        </div>



    </div>
</div>
        <div class="employees-modal" id="employeesModal">
            <div class="employees-header">
                <div class="employees-title">Сотрудники</div>
                <div class="employees-close" id="closeEmployees">&times;</div>
            </div>
            <div class="employees-list" id="employeesList">
                <!-- Список сотрудников будет добавляться динамически -->
            </div>
            <div class="employee-form" id="employeeForm">
                <div class="form-group">
                    <input type="text" class="form-input" id="employeeNameInput" placeholder="Имя сотрудника">
                </div>
                <div class="form-group">
                    <input type="text" class="form-input" id="employeeRoleInput" placeholder="Должность">
                </div>
                <div class="form-actions">
                    <button class="form-btn cancel" id="cancelEmployee">Отмена</button>
                    <button class="form-btn save" id="saveEmployee">Сохранить</button>
                </div>
            </div>
        </div>
    
        <!-- Модальное окно задач проекта -->
<div class="tasks-modal" id="tasksModal">
    <div class="tasks-header">
        <div class="tasks-title" id="tasksTitle">ЗАДАЧИ ПРОЕКТА</div>
        <div class="tasks-close" id="closeTasks">&times;</div>
    </div>
    
    <div class="tasks-container" id="tasksContainer">
        <!-- Столбцы с задачами будут добавляться сюда динамически -->
        <div class="task-column">
            <div class="task-column-header">
                <div class="task-column-title">Новые</div>
                <div class="task-column-toggle">▼</div>
                <div class="task-column-actions">
                    <i class="fas fa-plus add-task-btn" title="Добавить задачу"></i>
                </div>
            </div>
            <div class="task-list">
                <div class="task-item">
                    <div class="task-name">Задача 1</div>
                    <div class="task-description">Описание задачи 1</div>
                    <div class="task-footer">
                        <span>Сегодня</span>
                        <span>Низкий</span>
                    </div>
                    <div class="task-actions">
                        <i class="fas fa-plus add-subtask-btn" title="Добавить подзадачу"></i>
                        <i class="fas fa-ellipsis-h task-menu-btn" title="Действия"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="add-column" id="addColumnButton">
            <i class="fas fa-plus add-column-icon"></i>
            <span class="add-column-text">Добавить столбец</span>
        </div>
        
        <div class="column-form" id="columnForm">
            <input type="text" class="form-input-sm" id="columnNameInput" placeholder="Название столбца">
            <div class="form-actions-sm">
                <button class="form-btn-sm cancel" id="cancelColumn">Отмена</button>
                <button class="form-btn-sm save" id="saveColumn">Сохранить</button>
            </div>
        </div>
    </div>
</div>

        


















    <script>
     
        let projects = [
        { name: "Проект 1" },
        { name: "Проект 2" },
        { name: "Проект 3" }
    ];
    // Элементы модального окна проектов
    const projectsButton = document.getElementById('projectsButton');
    const projectsModal = document.getElementById('projectsModal');
    const closeProjects = document.getElementById('closeProjects');
    const projectsList = document.getElementById('projectsList');
    const addProjectButton = document.getElementById('addProjectButton');
    const projectForm = document.getElementById('projectForm');
    const projectNameInput = document.getElementById('projectNameInput');
    const cancelProject = document.getElementById('cancelProject');
    const saveProject = document.getElementById('saveProject');
    
    // Открытие модального окна проектов
    projectsButton.addEventListener('click', function(e) {
        e.preventDefault();
        renderProjects();
        projectsModal.classList.add('show');
    });
        // Закрытие модального окна проектов
        closeProjects.addEventListener('click', function() {
            projectsModal.classList.remove('show');
        });

        // Клик вне модального окна
        projectsModal.addEventListener('click', function(e) {
            if (e.target === projectsModal) {
                projectsModal.classList.remove('show');
            }
        });

        // Показать форму добавления проекта
        addProjectButton.addEventListener('click', function() {
            projectForm.classList.add('show');
            projectNameInput.focus();
        });

        // Отмена добавления проекта
        cancelProject.addEventListener('click', function() {
            projectForm.classList.remove('show');
            projectNameInput.value = '';
        });

        // Сохранение нового проекта
        saveProject.addEventListener('click', function() {
            const projectName = projectNameInput.value.trim();
            if (projectName) {
                projects.push({ name: projectName });
                renderProjects();
                projectNameInput.value = '';
                projectForm.classList.remove('show');
            }
        });
        // Рендеринг списка проектов
        function renderProjects() {
            // Очищаем список, кроме кнопки добавления
            projectsList.innerHTML = '';
            
            // Добавляем проекты
            projects.forEach(project => {
                const projectItem = document.createElement('div');
                projectItem.className = 'project-item';
                projectItem.innerHTML = `
                    <div class="project-name">${project.name}</div>
                `;
                projectsList.appendChild(projectItem);
            });
            
            // Добавляем кнопку добавления проекта в конец
            const addButton = document.createElement('div');
            addButton.className = 'add-project';
            addButton.id = 'addProjectButton';
            addButton.innerHTML = `
                <i class="fas fa-plus add-project-icon"></i>
                <span class="add-project-text">Добавить проект</span>
            `;
            projectsList.appendChild(addButton);
            
            // Назначаем обработчик событий на новую кнопку
            addButton.addEventListener('click', function() {
                projectForm.classList.add('show');
                projectNameInput.focus();
            });
        }

        // Переключение статуса
        const statusButton = document.getElementById('statusButton');
        const statusText = statusButton.querySelector('.status-text');
        const statusIndicator = statusButton.querySelector('.status-indicator');
        
        statusButton.addEventListener('click', function() {
            if (this.classList.contains('status-working')) {
                // Переключаем на режим "Отдыхаю"
                this.classList.remove('status-working');
                this.classList.add('status-resting');
                statusText.textContent = 'Отдыхаю';
            } else {
                // Переключаем на режим "Работаю"
                this.classList.remove('status-resting');
                this.classList.add('status-working');
                statusText.textContent = 'Работаю';
            }
        });
        // Управление уведомлениями
        const notificationsButton = document.getElementById('notificationsButton');
        const notificationsPanel = document.getElementById('notificationsPanel');
        const closeNotifications = document.getElementById('closeNotifications');
        
        notificationsButton.addEventListener('click', function(e) {
            e.stopPropagation();
            notificationsPanel.classList.toggle('show');
            accountMenu.classList.remove('show');
        });
        
        closeNotifications.addEventListener('click', function(e) {
            e.stopPropagation();
            notificationsPanel.classList.remove('show');
        });
        
        // Управление меню аккаунта
        const accountButton = document.getElementById('accountButton');
        const accountMenu = document.getElementById('accountMenu');
        
        accountButton.addEventListener('click', function(e) {
            e.stopPropagation();
            accountMenu.classList.toggle('show');
            notificationsPanel.classList.remove('show');
        });
        
        // Управление поиском
        const searchContainer = document.getElementById('searchContainer');
        const searchButton = document.getElementById('searchButton');
        const searchInput = document.getElementById('searchInput');
        
        searchButton.addEventListener('click', function(e) {
            e.stopPropagation();
            searchContainer.classList.toggle('active');
            if (searchContainer.classList.contains('active')) {
                searchInput.focus();
            }
        });
        
        // Закрытие поиска при клике вне его
        document.addEventListener('click', function(e) {
            if (!searchContainer.contains(e.target)) {
                searchContainer.classList.remove('active');
            }
            notificationsPanel.classList.remove('show');
            accountMenu.classList.remove('show');
        });
        
        // Обработка ввода поискового запроса
        searchInput.addEventListener('input', function() {
            // Здесь можно добавить логику поиска по странице
            console.log('Поиск:', this.value);
        });
        
        // Предотвращаем закрытие при клике внутри панелей
        notificationsPanel.addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        accountMenu.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // Элементы модального окна статистики
const statsButton = document.querySelector('.sidebar-item:nth-child(2)'); // Кнопка "Статистика" в сайдбаре
const statsModal = document.getElementById('statsModal');
const closeStats = document.getElementById('closeStats');
const statsTabs = document.querySelectorAll('.stats-tab');
const statsPanes = document.querySelectorAll('.stats-pane');
const tasksTabs = document.querySelectorAll('.tasks-tab');
const tasksPanes = document.querySelectorAll('.tasks-pane');

// Открытие модального окна статистики
statsButton.addEventListener('click', function(e) {
    e.preventDefault();
    statsModal.classList.add('show');
});

// Закрытие модального окна статистики
closeStats.addEventListener('click', function() {
    statsModal.classList.remove('show');
});

// Клик вне модального окна
statsModal.addEventListener('click', function(e) {
    if (e.target === statsModal) {
        statsModal.classList.remove('show');
    }
});
// Переключение вкладок статистики
statsTabs.forEach(tab => {
    tab.addEventListener('click', function() {
        // Удаляем активный класс у всех вкладок
        statsTabs.forEach(t => t.classList.remove('active'));
        // Добавляем активный класс текущей вкладке
        this.classList.add('active');
        
        // Скрываем все панели
        statsPanes.forEach(pane => pane.classList.remove('active'));
        // Показываем соответствующую панель
        const paneId = this.getAttribute('data-tab') + 'Pane';
        document.getElementById(paneId).classList.add('active');
    });
});

// Переключение вкладок задач
tasksTabs.forEach(tab => {
    tab.addEventListener('click', function() {
        // Удаляем активный класс у всех вкладок
        tasksTabs.forEach(t => t.classList.remove('active'));
        // Добавляем активный класс текущей вкладке
        this.classList.add('active');
        
        // Скрываем все панели
        tasksPanes.forEach(pane => pane.classList.remove('active'));
        // Показываем соответствующую панель
        const paneId = this.getAttribute('data-tab') + 'TasksPane';
        document.getElementById(paneId).classList.add('active');
    });
});

// Инициализация графиков после полной загрузки страницы
document.addEventListener('DOMContentLoaded', function() {
    if (typeof Chart !== 'undefined') {
        // График проектов
        const projectsCtx = document.getElementById('projectsChart');
        if (projectsCtx) {
            new Chart(projectsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Активные', 'Завершенные'],
                    datasets: [{
                        data: [75, 25], // Соответствует вашим 75% и 25%
                        backgroundColor: ['#4CAF50', '#9E9E9E'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // График времени
        const timeCtx = document.getElementById('timeChart');
        if (timeCtx) {
            new Chart(timeCtx, {
                type: 'bar',
                data: {
                    labels: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],
                    datasets: [{
                        label: 'Часы',
                        data: [6, 7, 8, 5, 6, 0, 0],
                        backgroundColor: '#4CAF50',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 2
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
    } else {
        console.error('Chart.js не загружен');
    }
});

// Массив для хранения сотрудников
let employees = [
    { name: "Иван Иванов", role: "Разработчик" },
    { name: "Мария Петрова", role: "Дизайнер" },
    { name: "Алексей Сидоров", role: "Менеджер" }
];

// Элементы модального окна сотрудников
const employeesButton = document.getElementById('employeesButton');
const employeesModal = document.getElementById('employeesModal');
const closeEmployees = document.getElementById('closeEmployees');
const employeesList = document.getElementById('employeesList');

// Открытие модального окна сотрудников
employeesButton.addEventListener('click', function(e) {
    e.preventDefault();
    renderEmployees();
    employeesModal.classList.add('show');
});

// Закрытие модального окна сотрудников
closeEmployees.addEventListener('click', function() {
    employeesModal.classList.remove('show');
});

// Клик вне модального окна
employeesModal.addEventListener('click', function(e) {
    if (e.target === employeesModal) {
        employeesModal.classList.remove('show');
    }
});



// Рендеринг списка сотрудников
function renderEmployees() {
    employeesList.innerHTML = '';
    employees.forEach((employee, index) => {
        const employeeItem = document.createElement('div');
        employeeItem.className = 'employee-item';
        employeeItem.innerHTML = `
            <div>
                <div class="employee-name">${employee.name}</div>
                <div class="employee-role">${employee.role}</div>
            </div>
            <div class="employee-actions">
                <span class="employee-action edit" data-index="${index}">Редактировать</span>
                <span class="employee-action delete" data-index="${index}">Удалить</span>
            </div>
        `;
        employeesList.appendChild(employeeItem);
    });

    // Назначаем обработчики для кнопок редактирования и удаления
    document.querySelectorAll('.employee-action.edit').forEach(button => {
        button.addEventListener('click', function() {
            const index = this.getAttribute('data-index');
            editEmployee(index);
        });
    });

    document.querySelectorAll('.employee-action.delete').forEach(button => {
        button.addEventListener('click', function() {
            const index = this.getAttribute('data-index');
            deleteEmployee(index);
        });
    });
}

// Показать форму добавления/редактирования сотрудника
function editEmployee(index) {
    const employee = employees[index];
    employeeNameInput.value = employee.name;
    employeeRoleInput.value = employee.role;
    employeeForm.classList.add('show');
    saveEmployee.onclick = function() {
        employees[index] = {
            name: employeeNameInput.value.trim(),
            role: employeeRoleInput.value.trim()
        };
        renderEmployees();
        employeeForm
    };
}

// Удаление сотрудника
function deleteEmployee(index) {
    employees.splice(index, 1);
    renderEmployees();
}

// Отмена добавления/редактирования сотрудника
cancelEmployee.addEventListener('click', function() {
    employeeForm.classList.remove('show');
    employeeNameInput.value = '';
    employeeRoleInput.value = '';
});

// Сохранение нового сотрудника
saveEmployee.addEventListener('click', function() {
    const name = employeeNameInput.value.trim();
    const role = employeeRoleInput.value.trim();
    if (name && role) {
        employees.push({ name, role });
        renderEmployees();
        employeeForm.classList.remove('show');
        employeeNameInput.value = '';
        employeeRoleInput.value = '';
    }
});








// Данные задач (для примера)
let projectTasks = {
    "Проект 1": [
        {
            name: "Новые",
            tasks: [
                {
                    name: "Задача 1",
                    description: "Описание задачи 1",
                    date: "Сегодня",
                    priority: "Низкий",
                    subtasks: [
                        { name: "Подзадача 1", completed: false },
                        { name: "Подзадача 2", completed: true }
                    ]
                },
                {
                    name: "Задача 2",
                    description: "Описание задачи 2",
                    date: "Завтра",
                    priority: "Средний",
                    subtasks: []
                }
            ]
        },
        {
            name: "В работе",
            tasks: [
                {
                    name: "Задача 3",
                    description: "Описание задачи 3",
                    date: "Вчера",
                    priority: "Высокий",
                    subtasks: []
                }
            ]
        }
    ],
    "Проект 2": [
        {
            name: "Запланировано",
            tasks: [
                {
                    name: "Задача A",
                    description: "Описание задачи A",
                    date: "На этой неделе",
                    priority: "Средний",
                    subtasks: []
                }
            ]
        }
    ]
};

// Элементы модального окна задач
const tasksModal = document.getElementById('tasksModal');
const closeTasks = document.getElementById('closeTasks');
const tasksTitle = document.getElementById('tasksTitle');
const tasksContainer = document.getElementById('tasksContainer');
const addColumnButton = document.getElementById('addColumnButton');
const columnForm = document.getElementById('columnForm');
const columnNameInput = document.getElementById('columnNameInput');
const cancelColumn = document.getElementById('cancelColumn');
const saveColumn = document.getElementById('saveColumn');

// Открытие задач проекта
function openProjectTasks(projectName) {
    tasksTitle.textContent = `ЗАДАЧИ: ${projectName}`;
    renderTaskColumns(projectName);
    tasksModal.classList.add('show');
    projectsModal.classList.remove('show');
}

// Рендеринг столбцов задач
function renderTaskColumns(projectName) {
    tasksContainer.innerHTML = '';
    
    const columns = projectTasks[projectName] || [
        { name: "Новые", tasks: [] },
        { name: "В работе", tasks: [] },
        { name: "Завершено", tasks: [] }
    ];
    
    columns.forEach(column => {
        const columnElement = document.createElement('div');
        columnElement.className = 'task-column';
        columnElement.innerHTML = `
            <div class="task-column-header">
                <div class="task-column-title">${column.name}</div>
                <div class="task-column-toggle">▼</div>
                <div class="task-column-actions">
                    <i class="fas fa-plus add-task-btn" title="Добавить задачу"></i>
                </div>
            </div>
            <div class="task-list"></div>
        `;
        
        const taskList = columnElement.querySelector('.task-list');
        column.tasks.forEach(task => {
            taskList.appendChild(createTaskElement(task));
        });
        
        // Добавляем кнопку "Добавить задачу"
        const addTaskBtn = columnElement.querySelector('.add-task-btn');
        addTaskBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showTaskForm(columnElement, projectName, column.name);
        });
        
        // Обработчик сворачивания/разворачивания
        const header = columnElement.querySelector('.task-column-header');
        header.addEventListener('click', function() {
            columnElement.classList.toggle('collapsed');
        });
        
        tasksContainer.appendChild(columnElement);
    });
    
    // Добавляем кнопку "Добавить столбец"
    tasksContainer.appendChild(addColumnButton);
    tasksContainer.appendChild(columnForm);
}

// Создание элемента задачи
function createTaskElement(task) {
    const taskElement = document.createElement('div');
    taskElement.className = 'task-item';
    taskElement.innerHTML = `
        <div class="task-name">${task.name}</div>
        <div class="task-description">${task.description}</div>
        <div class="task-footer">
            <span>${task.date}</span>
            <span>${task.priority}</span>
        </div>
        ${task.subtasks.length ? `
        <div class="subtasks">
            <div class="subtasks-title">Подзадачи:</div>
            <div class="subtasks-list"></div>
        </div>` : ''}
        <div class="task-actions">
            <i class="fas fa-plus add-subtask-btn" title="Добавить подзадачу"></i>
            <i class="fas fa-ellipsis-h task-menu-btn" title="Действия"></i>
        </div>
    `;
    
    // Добавляем подзадачи
    if (task.subtasks.length) {
        const subtasksList = taskElement.querySelector('.subtasks-list');
        task.subtasks.forEach(subtask => {
            const subtaskElement = document.createElement('div');
            subtaskElement.className = `subtask ${subtask.completed ? 'completed' : ''}`;
            subtaskElement.innerHTML = `
                <label>
                    <input type="checkbox" ${subtask.completed ? 'checked' : ''}>
                    <span>${subtask.name}</span>
                </label>
            `;
            subtasksList.appendChild(subtaskElement);
        });
    }
    
    // Обработчики для кнопок задачи
    const addSubtaskBtn = taskElement.querySelector('.add-subtask-btn');
    if (addSubtaskBtn) {
        addSubtaskBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            showSubtaskForm(taskElement, task);
        });
    }
    
    return taskElement;
}

// Форма добавления подзадачи
function showSubtaskForm(taskElement, task) {
    const form = document.createElement('div');
    form.className = 'subtask-form';
    form.innerHTML = `
        <input type="text" class="form-input-sm subtask-input" placeholder="Название подзадачи">
        <div class="form-actions-sm">
            <button class="form-btn-sm cancel cancel-subtask">Отмена</button>
            <button class="form-btn-sm save add-subtask">Добавить</button>
        </div>
    `;
    
    const subtasksContainer = taskElement.querySelector('.subtasks') || 
        (() => {
            const container = document.createElement('div');
            container.className = 'subtasks';
            container.innerHTML = '<div class="subtasks-title">Подзадачи:</div><div class="subtasks-list"></div>';
            taskElement.insertBefore(container, taskElement.querySelector('.task-actions'));
            return container;
        })();
    
    const subtasksList = subtasksContainer.querySelector('.subtasks-list');
    subtasksList.appendChild(form);
    
    const input = form.querySelector('.subtask-input');
    input.focus();
    
    // Обработчики для формы
    form.querySelector('.cancel-subtask').addEventListener('click', () => {
        form.remove();
    });
    
    form.querySelector('.add-subtask').addEventListener('click', () => {
        const subtaskName = input.value.trim();
        if (subtaskName) {
            const subtaskElement = document.createElement('div');
            subtaskElement.className = 'subtask';
            subtaskElement.innerHTML = `
                <label>
                    <input type="checkbox">
                    <span>${subtaskName}</span>
                </label>
            `;
            subtasksList.insertBefore(subtaskElement, form);
            input.value = '';
            
            // Добавляем подзадачу в данные
            if (!task.subtasks) task.subtasks = [];
            task.subtasks.push({ name: subtaskName, completed: false });
        }
    });
}

// Форма добавления задачи
function showTaskForm(columnElement, projectName, columnName) {
    const form = document.createElement('div');
    form.className = 'task-form show';
    form.innerHTML = `
        <input type="text" class="form-input-sm" placeholder="Название задачи">
        <textarea class="form-textarea" placeholder="Описание"></textarea>
        <div class="form-actions-sm">
            <button class="form-btn-sm cancel cancel-task">Отмена</button>
            <button class="form-btn-sm save add-task">Добавить</button>
        </div>
    `;
    
    const taskList = columnElement.querySelector('.task-list');
    taskList.appendChild(form);
    
    const input = form.querySelector('input');
    input.focus();
    
    // Обработчики для формы
    form.querySelector('.cancel-task').addEventListener('click', () => {
        form.remove();
    });
    
    form.querySelector('.add-task').addEventListener('click', () => {
        const taskName = input.value.trim();
        const description = form.querySelector('textarea').value.trim();
        
        if (taskName) {
            const newTask = {
                name: taskName,
                description: description,
                date: "Сегодня",
                priority: "Средний",
                subtasks: []
            };
            
            taskList.insertBefore(createTaskElement(newTask), form);
            
            // Добавляем задачу в данные
            if (!projectTasks[projectName]) {
                projectTasks[projectName] = [];
            }
            
            const column = projectTasks[projectName].find(col => col.name === columnName) || 
                { name: columnName, tasks: [] };
                
            if (!projectTasks[projectName].includes(column)) {
                projectTasks[projectName].push(column);
            }
            
            column.tasks.push(newTask);
            form.remove();
        }
    });
}

// Инициализация обработчиков
document.addEventListener('DOMContentLoaded', function() {
    // Обработчики для проектов
    document.querySelectorAll('.project-item').forEach(project => {
        project.addEventListener('click', function(e) {
            if (e.target.classList.contains('project-name')) {
                openProjectTasks(e.target.textContent);
            }
        });
    });
    
    // Закрытие окна задач
    closeTasks.addEventListener('click', function() {
        tasksModal.classList.remove('show');
    });
    
    // Клик вне модального окна задач
    tasksModal.addEventListener('click', function(e) {
        if (e.target === tasksModal) {
            tasksModal.classList.remove('show');
        }
    });
    
    // Показать форму добавления столбца
    addColumnButton.addEventListener('click', function() {
        columnForm.classList.add('show');
        columnNameInput.focus();
    });
    
    // Отмена добавления столбца
    cancelColumn.addEventListener('click', function() {
        columnForm.classList.remove('show');
        columnNameInput.value = '';
    });
    
    // Сохранение нового столбца
    saveColumn.addEventListener('click', function() {
        const columnName = columnNameInput.value.trim();
        if (columnName) {
            const currentProject = tasksTitle.textContent.replace('ЗАДАЧИ: ', '');
            
            if (!projectTasks[currentProject]) {
                projectTasks[currentProject] = [];
            }
            
            projectTasks[currentProject].push({
                name: columnName,
                tasks: []
            });
            
            renderTaskColumns(currentProject);
            columnNameInput.value = '';
            columnForm.classList.remove('show');
        }
    });
});

// Обновляем обработчики для проектов после их динамического добавления
function renderProjects() {
    projectsList.innerHTML = '';
    
    projects.forEach(project => {
        const projectItem = document.createElement('div');
        projectItem.className = 'project-item';
        projectItem.innerHTML = `
            <div class="project-name">${project.name}</div>
        `;
        projectItem.addEventListener('click', function(e) {
            if (e.target.classList.contains('project-name')) {
                openProjectTasks(e.target.textContent);
            }
        });
        projectsList.appendChild(projectItem);
    });
    
    const addButton = document.createElement('div');
    addButton.className = 'add-project';
    addButton.id = 'addProjectButton';
    addButton.innerHTML = `
        <i class="fas fa-plus add-project-icon"></i>
        <span class="add-project-text">Добавить проект</span>
    `;
    projectsList.appendChild(addButton);
    
    addButton.addEventListener('click', function() {
        projectForm.classList.add('show');
        projectNameInput.focus();
    });
}

    </script>

</div>
</html>